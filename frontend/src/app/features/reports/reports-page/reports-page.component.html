<app-page-header title="Reports ‚ö†Ô∏è"> </app-page-header>

<mat-tab-group dynamicHeight="true">
  <mat-tab label="Open reports">
    <mat-nav-list>
      <cdk-virtual-scroll-viewport
        scrollWindow
        [itemSize]="72"
        [maxBufferPx]="500"
      >
        <ng-container *cdkVirtualFor="let report of reportsDataSource">
          @if (!report) {
            <a mat-list-item disable d>
              <app-circle-placeholder matListItemIcon [radius]="35">
              </app-circle-placeholder>
              <app-line-placeholder
                matListItemTitle
                [width]="250"
                [height]="15"
              >
              </app-line-placeholder>
              <app-line-placeholder matListItemLine [width]="150" [height]="10">
              </app-line-placeholder>
            </a>
          } @else if (!report.isClosed) {
            <a
              mat-list-item
              [routerLink]="[report.id]"
              routerLinkActive="active"
              (click)="report.isRead = true"
            >
              <span matListItemIcon>
                <mat-icon [color]="report.isRead ? 'secondary' : 'warn'">
                  report
                </mat-icon>
              </span>

              <span
                matListItemTitle
                [ngStyle]="{ 'font-weight': report.isRead ? 'normal' : 'bold' }"
              >
                {{ report.title }}</span
              >
              <span
                matListItemLine
                [ngStyle]="{ 'font-weight': report.isRead ? 'normal' : 'bold' }"
              >
                {{ report.propertyName }}</span
              >
            </a>
          }
        </ng-container>
      </cdk-virtual-scroll-viewport>

      @if (reportsDataSource.totalCount == 0) {
        <h2>No open reports üëç</h2>
      }
    </mat-nav-list>
  </mat-tab>

  <mat-tab label="Closed reports">
    <mat-nav-list>
      <cdk-virtual-scroll-viewport
        scrollWindow
        [itemSize]="72"
        [maxBufferPx]="500"
      >
        <ng-container *cdkVirtualFor="let report of reportsDataSource">
          @if (!report) {
            <a mat-list-item disable d>
              <app-circle-placeholder matListItemIcon [radius]="35">
              </app-circle-placeholder>
              <app-line-placeholder
                matListItemTitle
                [width]="250"
                [height]="15"
              >
              </app-line-placeholder>
              <app-line-placeholder matListItemLine [width]="150" [height]="10">
              </app-line-placeholder>
            </a>
          } @else if (report.isClosed) {
            <a
              mat-list-item
              [routerLink]="[report.id]"
              routerLinkActive="active"
              (click)="report.isRead = true"
            >
              <span matListItemIcon>
                <mat-icon [color]="report.isRead ? 'secondary' : 'warn'">
                  report
                </mat-icon>
              </span>

              <span
                matListItemTitle
                [ngStyle]="{ 'font-weight': report.isRead ? 'normal' : 'bold' }"
              >
                {{ report.title }}</span
              >
              <span
                matListItemLine
                [ngStyle]="{ 'font-weight': report.isRead ? 'normal' : 'bold' }"
              >
                {{ report.propertyName }}</span
              >
            </a>
          }
        </ng-container>
      </cdk-virtual-scroll-viewport>
      @if (reportsDataSource.totalCount == 0) {
        <h2>No closed reports üëç</h2>
      }
    </mat-nav-list>
  </mat-tab>
</mat-tab-group>

<router-outlet hidden />
